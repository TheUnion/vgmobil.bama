$(document).ready(function(){$(document).bind("dragstart",function(){return!1});var e=!1,t={start_interaction:{id:6260200,onEvent:function(){return"object"!=typeof VGTouchTimeTracker?!1:(VGTouchTimeTracker.run(),void 0)}},arrive_station3:{id:6260201,onEvent:function(e){e("assets/img/poster.jpg")}},arrive_station4:{id:6260202,onEvent:!1},arrive_station6:{id:6260203,onEvent:!1},arrive_station7:{id:6260204,onEvent:function(){$("#parallax").parallaxSwipe.setEdge("right")}},leave_station3:{id:6260205,onEvent:!1},leave_station4:{id:6260206,onEvent:!1},leave_station6:{id:6260207,onEvent:!1},leave_station7:{id:6260208,onEvent:!1},click_lise:{id:6260209,onEvent:!1},click_farmer:{id:6260210,onEvent:!1},close_lise:{id:6260213,onEvent:!1},close_farmer:{id:6260214,onEvent:!1},click_link1:{id:6260211,onEvent:!1},click_link2:{id:6260212,onEvent:!1},video_play:{id:6260215,onEvent:!1},video_pause:{id:6260216,onEvent:!1},video_pause:{id:6260216,onEvent:!1},video_finish:{id:6260220,onEvent:!1}},n={HAS_CACHED_EVENTS:!1,start:(new Date).getTime(),url:window.location,INITIALIZED:!1},i=null;$(function(){window.onerror=function(e,t,n){var i="Error : "+e+" @ "+t+":"+n;i+="\nurl: "+document.URL;var o=new UserAgent;return i+="\nbrowser: "+o.browser_name+" "+o.browser_version+" | OS: "+o.os+" | platform: "+o.platform,r(i,e),!1};var r=function(e,t){t?console.log(e,t):console.log(e),"object"==typeof HTMLDebugger?HTMLDebugger.log(e,t):console.log("Error in function debugLog(): Kroma HTMLDebugger is not initialized.")},o=function(e,t,n,i){var e=e||"bounce",t=t||5e3,n=n||!1,i=i||!1;l()||(s(e,n,i),n&&setTimeout(o,t,e,t,n,i))},a=function(e){var e=e||!1;e&&car.classList.remove(e)},s=function(e,t,n){var e=e||"bounce",n=n||!1;car.classList.add(e),n&&setTimeout(a,n,e)},c=function(){n.INITIALIZED=!0},l=function(){return n.INITIALIZED},u=function(){return navigator.userAgent.toLowerCase().indexOf("android")>-1},d=function(e){u()?window.open(e.href):h(null,e)},f=function(i){var o=t[i.event]||!1,a="function"==typeof p62602Event?p62602Event:!1;if(i.registered=!1,p(i.event),a){if(n.HAS_CACHED_EVENTS){for(var s=0,c=M.length;c>s;s++)console.log("registering delayed event: "+M[s].event+" ("+t[M[s].event].id+")"),setTimeout(a,200,t[M[s].event].id),M[s].registered=!0;n.HAS_CACHED_EVENTS=!1}}else n.HAS_CACHED_EVENTS=!0,i.registered=!1,M.push(i),console.log("Analytics script not loaded, buffering event: "+i.event);if(e)return r("[EVENT] "+i.event),void 0;try{if(!t[i.event])return console.log("Unknown event : "+i.event),void 0;a&&a(o.id),"function"==typeof o.onEvent&&o.onEvent.call(null,g)}catch(o){r("Exception in function onEvent()",o)}i.registered=!0,M.push(i)},p=function(e){for(var e=e||!1,t=0,n=ONDEMAND_LOADERS.length;n>t;t++)e===ONDEMAND_LOADERS[t].getAttribute("data-load-event")&&ONDEMAND_LOADERS[t].classList.add(ONDEMAND_LOADERS[t].id)},m=function(){if(l())return console.log("Already initialized, escaping"),void 0;O=document.getElementsByClassName("lazyload"),ONDEMAND_LOADERS=document.getElementsByClassName("lazyload ondemand");for(var e=0,t=O.length;t>e;e++)O[e].classList.contains("ondemand")||O[e].classList.add(O[e].id);c(!0);var n={event:"start_interaction",message:"First swipe detected.",target:null,time:(new Date).getTime()};f(n)},g=function(e){var t=document.getElementById("video1");return t?i||!1!==(i=E(t))?(i.setPoster(e),!0):!1:!1},v=function(e){var t=document.getElementById(e||"video1");return t?i||!1!==(i=E(t))?(i.togglePause(),!0):!1:!1},E=function(e){try{var t="string"==typeof e?document.getElementById(e):e,n={},i=!1,r=this;t.addEventListener("loadedmetadata",function(){r.loadedMetaData=!0},!1),t.addEventListener("error",function(e){logError(e)},!1),t.addEventListener("play",function(){f({event:"video_play"})},!1),t.addEventListener("pause",function(){f({event:"video_pause"})},!1),t.addEventListener("ended",function(){f({event:"video_finished"})},!1),n.element=t,n.play=function(){t.play()},n.pause=function(){t.pause()},n.stop=function(){t.playing&&t.pause()},n.togglePause=function(){t.paused?t.play():t.pause()},n.skip=function(e){t.currentTime+=e},n.reset=function(){i&&(t.currentTime=0)},n.restart=function(){i&&(t.currentTime=0,f({event:"video_restart"}))},n.toggleControls=function(){t.hasAttribute("controls")?this.hideControls():this.showControls()},n.showControls=function(){t.setAttribute("controls","controls")},n.hideControls=function(){t.removeAttribute("controls")},n.setPoster=function(e){t.setAttribute("poster",e)}}catch(o){throw n=null,o}return n},h=function(e,t){if(t.click)t.click();else if(document.createEvent&&e.target!==t){var n=document.createEvent("MouseEvents");n.initMouseEvent("click",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),t.dispatchEvent(n)}},w=function(e){var t=Math.abs(e.offsetLeft+A)+e.clientX;if(C&&j(),B&&U(),t>=4886&&5011>=t){if(e.clientY>230&&275>e.clientY)return}else if(t>=6480&&6605>=t){if(e.clientY>230&&275>e.clientY)return j(),void 0}else if(t>=7824&&8052>=t){if(e.clientY>230&&282>e.clientY)return d(link1),f({event:"click_link1"}),void 0;if(e.clientY>286&&332>e.clientY)return d(link2),f({event:"click_link2"}),void 0}else if(t>=3137&&3553>=t&&e.clientY>86&&322>e.clientY)return v(),void 0;return!1},_=function(e){var t=w(e);return t},y=null,b=!1,I=!1,S={},k="none",A=0,x=0,D=100,L=400,P=.9,N=.9,T=.9,C=!1,B=!1,W=60,M=[],O=null;ONDEMAND_LOADERS=null,i=null,CLICK_ENABLED=!1,car=document.getElementById("car"),debugpanel=document.getElementById("debugoutput"),parallax=document.getElementById("parallax"),scene=document.getElementById("layer5"),debuginfo=document.getElementById("debuginfo"),lise_recipe=document.getElementById("lise_recipe"),lise_hello=document.getElementById("lise_hello"),farmer_recipe=document.getElementById("farmer_recipe"),farmer_hello=document.getElementById("farmer_hello"),final_btn1=document.getElementById("final_btn1"),final_btn2=document.getElementById("final_btn2"),link1=document.getElementById("link1"),link2=document.getElementById("link2"),triggers={},clicktargets={};for(var R=document.getElementsByClassName("clicktarget"),Y=parallax.getBoundingClientRect().left,H=0,V=R.length;V>H;H++){clicktargets[R[H].id]={element:R[H],rect:R[H].getBoundingClientRect(),position:{left:0,top:0,right:0,bottom:0}};var X=clicktargets[R[H].id],q=X.position;q.left=Math.round(X.rect.left-Y),q.right=Math.round(X.rect.right-Y),q.top=Math.round(X.rect.top),q.bottom=Math.round(X.rect.bottom),console.log("clickTarget   : "+X.element.id+"(<"+X.element.nodeName.toLowerCase()+">)"+" @ "+q.left+", "+q.top+" ("+q.right+", "+q.bottom+")")}var j=function(){C?(f({event:"close_lise"}),$("#lise_tips").animate({top:40,opacity:1},325,"linear"),$("#lise_recipe").animate({top:-500,opacity:0},325,"linear")):(f({event:"click_lise"}),$("#lise_tips").animate({top:500,opacity:0},325,"linear"),$("#lise_recipe").animate({top:0,opacity:1},325,"linear")),C=!C},U=function(){B?(f({event:"click_farmer"}),$("#farmer_tips").animate({top:40,opacity:1},325,"linear"),$("#farmer_recipe").animate({top:-500,opacity:0},325,"linear")):(f({event:"click_farmer"}),$("#farmer_tips").animate({top:500,opacity:0},325,"linear"),$("#farmer_recipe").animate({top:0,opacity:1},325,"linear")),B=!B},z=function(){var e,t=(new Date).getTime(),n=parallax.getBoundingClientRect();if(I||(b=""+new Date,I=(new Date).getTime(),starttimetext=""+(new Date).getTime()),n){x=A-n.left,x>W&&(l()||(m(),console.log("Interaction detected, preloading resources ..")));var i=0,r=3;for(var o in S)if(!(r>++i)){if(e=A-(S[o].getBoundingClientRect().left-L),0>e)break;if(triggers[o]||(triggers[o]=!0),Math.abs(e)>L+250){if(k===o){$("#parallax").parallaxSwipe.setSpeed(P,N,T);var a={event:"leave_"+o,message:"leaving station "+o,target:k,time:t};f(a),k="none"}}else if(k!==o){f({event:"arrive_"+o,message:"arriving at station "+o,target:k,time:t}),k=o;var s=Math.round($("#"+k).position().left);$("#parallax").parallaxSwipe.requestPosition(-s)}}}},F=function(){var e=S.length;console.log("Starting timer..."),A=parallax.getBoundingClientRect().left,e||($(".station").each(function(e,t){S[t.id||e]=t}),e=S.length),y=setInterval(z,D),o("bounce",8e3,!0,3e3)};setTimeout(function(){window.scrollTo(0,1)},0),$("#parallax").parallaxSwipe({DECAY:N,MOUSEDOWN_DECAY:T,SPEED_SPRING:P,BOUNCE_SPRING:.5,HORIZ:!0,SNAPDISTANCE:20,DISABLELINKS:!1,LAYER:[20,12,3.2,1.6,1,1]});var K=$("#parallax").parallaxSwipe.getSize();$(".parallax_layer").css("width",K),$("#parallax").bind("click",function(e){var t={offsetLeft:e.target.offsetLeft,offsetTop:e.target.offsetTop};return"number"==typeof t.offsetLeft&&(t.clientX=e.clientX,t.clientY=e.clientY),_(t),!0}),$(".recipe").bind("selectstart",function(){return!1}),F()})});var UserAgent;UserAgent=function(){function e(e){null==e&&(e=navigator.userAgent),this.source=e.replace(/^\s*/,"").replace(/\s*$/,""),this.browser_name=o(this.source),this.browser_version=a(this.source),this.os=s(this.source),this.platform=c(this.source)}var t,n,i,r,o,a,s,c;return r={Firefox:/firefox\/([\d\w\.\-]+)/i,IE:/msie\s([\d\.]+[\d])/i,Chrome:/chrome\/([\d\w\.\-]+)/i,Safari:/version\/([\d\w\.\-]+)/i,Ps3:/([\d\w\.\-]+)\)\s*$/i,Psp:/([\d\w\.\-]+)\)?\s*$/i},t={Konqueror:/konqueror/i,Chrome:/chrome/i,Safari:/safari/i,IE:/msie/i,Opera:/opera/i,PS3:/playstation 3/i,PSP:/playstation portable/i,Firefox:/firefox/i},n={WindowsVista:/windows nt 6\.0/i,Windows7:/windows nt 6\.1/i,Windows8:/windows nt 6\.2/i,Windows2003:/windows nt 5\.2/i,WindowsXP:/windows nt 5\.1/i,Windows2000:/windows nt 5\.0/i,OSX:/os x (\d+)[._](\d+)/i,Linux:/linux/i,Wii:/wii/i,PS3:/playstation 3/i,PSP:/playstation portable/i,Ipad:/\(iPad.*os (\d+)[._](\d+)/i,Iphone:/\(iPhone.*os (\d+)[._](\d+)/i},i={Windows:/windows/i,Mac:/macintosh/i,Linux:/linux/i,Wii:/wii/i,Playstation:/playstation/i,Ipad:/ipad/i,Ipod:/ipod/i,Iphone:/iphone/i,Android:/android/i,Blackberry:/blackberry/i},o=function(e){switch(!0){case t.Konqueror.test(e):return"konqueror";case t.Chrome.test(e):return"chrome";case t.Safari.test(e):return"safari";case t.IE.test(e):return"ie";case t.Opera.test(e):return"opera";case t.PS3.test(e):return"ps3";case t.PSP.test(e):return"psp";case t.Firefox.test(e):return"firefox";default:return"unknown"}},a=function(e){var t;switch(o(e)){case"chrome":if(r.Chrome.test(e))return RegExp.$1;break;case"safari":if(r.Safari.test(e))return RegExp.$1;break;case"firefox":if(r.Firefox.test(e))return RegExp.$1;break;case"ie":if(r.IE.test(e))return RegExp.$1;break;case"ps3":if(r.Ps3.test(e))return RegExp.$1;break;case"psp":if(r.Psp.test(e))return RegExp.$1;break;default:if(t=/#{name}[\/ ]([\d\w\.\-]+)/i,t.test(e))return RegExp.$1}},s=function(e){switch(!0){case n.WindowsVista.test(e):return"Windows Vista";case n.Windows7.test(e):return"Windows 7";case n.Windows2003.test(e):return"Windows 2003";case n.WindowsXP.test(e):return"Windows XP";case n.Windows2000.test(e):return"Windows 2000";case n.Linux.test(e):return"Linux";case n.Wii.test(e):return"Wii";case n.PS3.test(e):return"Playstation";case n.PSP.test(e):return"Playstation";case n.OSX.test(e):return e.match(n.OSX)[0].replace("_",".");case n.Ipad.test(e):return e.match(n.Ipad)[0].replace("_",".");case n.Iphone.test(e):return e.match(n.Iphone)[0].replace("_",".");default:return"unknown"}},c=function(e){switch(!0){case i.Windows.test(e):return"Microsoft Windows";case i.Mac.test(e):return"Apple Mac";case i.Android.test(e):return"Android";case i.Blackberry.test(e):return"Blackberry";case i.Linux.test(e):return"Linux";case i.Wii.test(e):return"Wii";case i.Playstation.test(e):return"Playstation";case i.Ipad.test(e):return"iPad";case i.Ipod.test(e):return"iPod";case i.Iphone.test(e):return"iPhone";default:return"unknown"}},e}();var onError=function(){console.log("error loading script "+(this.async?"asynchronously, ":"synchronously, ")+(this.defer?"deferred: ":"not deferred: ")+this.fileName)},onSuccess=function(){console.log("loaded script "+(this.async?"asynchronously, ":"synchronously, ")+(this.defer?"deferred: ":"not deferred: ")+this.fileName)},requireScript=function(e,t,n,i,r){var o=document.getElementsByTagName("head")[0]||document.documentElement,a=document.createElement("script"),t=t||!1,n=n||!1;return t&&(a.async=!0),n&&(a.defer=!0),a.src=e,a.fileName=e,a.self=a,a.success=i||!1,a.failure=r||!1,a.onload=function(){this.success&&this.success.apply(this)},a.onerror=function(e){this.failure&&this.failure.apply(this,e)},o.insertBefore(a,o.firstChild)};requireScript("assets/js/lib/kroma.timetracker.js",!1,!1,onSuccess,onError),requireScript("assets/js/lib/kroma.debugger.js",!1,!1,onSuccess,onError);