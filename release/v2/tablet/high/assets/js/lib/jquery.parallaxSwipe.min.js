(function(e){e.fn.parallaxSwipe=function(t){function n(){O(parseInt(o.css(f),10)),1==A&&requestAnimFrame(n)}var i={DECAY:.9,MOUSEDOWN_DECAY:.5,SPEED_SPRING:.5,BOUNCE_SPRING:.08,SNAPDISTANCE:20,DISABLELINKS:!0,LAYER:[]},a=e.extend(i,t),o=this,s=document.getElementById(o.attr("id")),r=o.children(".panel"),u=parseInt(o.parents("div").css("width"),10);parseInt(o.parents("div").css("height"),10);var c,l,d,f,h,m,w=0,E=0,v=!1,p=!1,g=!1,A=!1,S=!0,L=!1,Y=!1,D=0,R=0,b=0,I=0,C=0,M=(new Date).getTime(),N=0,_=!1,T=T||!1;navigator.userAgent;var y=function(){document.getElementById("debuginfo"),R++,N=(new Date).getTime()-M,Math.floor(N/1e3)>C&&(C++,b+=R,D=R,R=0,I=b/(N/1e3),"object"==typeof HTMLDebugger&&(HTMLDebugger.setSessionVariable("fps",Math.round(100*I)/100,"info"),HTMLDebugger.setSessionVariable("framerate",D,"info")))},P=parseInt(r.css("width"),10)*r.length;m=u,f="left",r.css("float","left"),o.css("width",P),h=P,o.css(f,0),this.parallaxSwipe.getSize=function(){return P>""?P:sliderH};var O=function(t){var n="";if(Y)return w=.5*(Y-t),t=Math.round(t+w),4>=Math.abs(w)&&(t=Math.round(Y),w=0,Y=!1),o.css(f,t),a.LAYER.length>0&&e.each(a.LAYER,function(n,i){e("#layer"+(n+1)).css(f,t/i)}),void 0;if(w*=v&&!Y&&t>-7650?a.MOUSEDOWN_DECAY:a.DECAY,!v){if(t>0-w)return t=0,o.css(f,t),a.LAYER.length>0&&e.each(a.LAYER,function(n){e("#layer"+(n+1)).css(f,t)}),void 0;if(-7650>t+h?(t=-7650,w=0,E=(m-h-t)*a.BOUNCE_SPRING):E=0,0>d-l){var i=Math.round(w+E),s=t+i;o.css(f,s),a.LAYER.length>0&&e.each(a.LAYER,function(t,n){e("#layer"+(t+1)).css(f,s/n)})}else{var i=Math.round(w+E);o.css(f,t+i),a.LAYER.length>0&&e.each(a.LAYER,function(n,a){e("#layer"+(n+1)).css(f,(t+i)/a)})}n+="sliderLT is "+t+"<br />_velocity is "+w+"<br />REQUESTED_POSITION is "+Y+"<br />bounce is "+E,e("#position_data").html(n),y()}};window.requestAnimFrame=function(){var e=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)};return T&&(_=e.name||e),e}();var q=function(){e("a",o).each(function(){e(this).click(function(){return Math.abs(d-l)>=a.SNAPDISTANCE?!1:void 0})})},X=function(e){Y||v||(g?e=event.touches[0]:e||(e=window.event),s.setCapture?s.setCapture():(window.addEventListener("mousemove",x,!1),window.addEventListener("mouseup",B,!1)),l=d=1==p?e.clientX:e.pageX,c=document.getElementById(o.attr("id")).offsetLeft,_verticalXY=_lastVerticalDownXY=1==p?e.clientY:e.pageY,_verticalLT=document.getElementById(o.attr("id")).offsetTop,0==c?S=!0:-7650>=c?(-7650>c&&(w=-.3),L=!0):(S=!1,L=!1),v=!0,0==A&&(A=!0,requestAnimFrame(n)))};this.parallaxSwipe.stop=function(){w=0},this.parallaxSwipe.setSpeed=function(e,t,n){return a.DECAY=t,a.MOUSEDOWN_DECAY=n,a},this.parallaxSwipe.requestPosition=function(e){Y=Math.round(e)},this.parallaxSwipe.setEdge=function(e){switch(e.toLowerCase()){case"right":L=!0;break;case"left":S=!0}};var x=function(t){var n=t;if(!Y&&v){if(g?n=event.touches[0]:n||(n=window.event),1==p)var i=n.clientX,s=n.clientY;else var i=n.pageX,s=n.pageY;var r=i-d,u=s-_lastVerticalDownXY;if(F(r,u)){t.preventDefault();var h=c+(i-l);S&&h>0||h>0?L=!1:L&&-7650>h||-7650>h?(console.log("consoleVar: "+h+", deltaX: "+r),S=!1):(i-l>7650&&(i-=7650-(i-l)),o.css(f,c+(i-l)),a.LAYER.length>0&&e.each(a.LAYER,function(t,n){e("#layer"+(t+1)).css(f,(c+(i-l))/n)}),w+=(i-d)*a.SPEED_SPRING,d=i)}else t.stopPropagation()}},B=function(){v&&(v=!1,q(),s.setCapture?s.releaseCapture():(window.removeEventListener("mousemove",x,!1),window.removeEventListener("mouseup",B,!1)))},F=function(e,t){var n;return n=0==t?!0:.37>=e/t&&e/t>=-.37?!1:!0};g="ontouchstart"in window,o.bind("mousedown touchstart",function(e){X(e)}),o.bind("mousemove touchmove",function(e){x(e)}),o.bind("mouseup touchend",function(e){B(e)})}})(jQuery);